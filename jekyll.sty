\ProvidesPackage{jekyll}
\RequirePackage{etoolbox,environ}

% We must set \textwidth to a big value, otherwise we can get unwanted linebreaks, 
% resulting in invalid yaml header
\textwidth=1000em

%\newtoks\yamltoks
\gdef\yamltoks{}
\newcommand\AddToHeader[1]{%
\gdef\yamltoks{#1\\}
}
\newcommand\SetLayout[1]{%
\gdef\jekyll@layout{#1}
}
\newcommand\GetLayout{%
layout: \jekyll@layout\\%
}
\newcommand\GetTitle{%
title: \@title\\%
}
\newcommand\GetLanguage{%
\ifx\bbl@main@language\@undefined 
\else
language: \bbl@main@language\\%
}
\newcommand\GetStyle{%
style: \jobname.css\\%
}
\newtoks\my@Abstract
\newcommand\Abstract[1]{\my@Abstract{#1}}
\newcommand\GetAbstract{%
%\def\@myempty{}
%\ifx\@Abstract\@empty
%\else
abstract: |\\
  \the\my@Abstract 
%\fi
}
\SetLayout{post}
%\AddToHeader{title=\@title}
